<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>è¸©å‘è®°å½•ï¼šç›¸åŒæ•°æ®ï¼Œä¸¤æ¬¡pltç”»å›¾ç»“æœä¸ä¸€è‡´ | AllenY&#39;s blog</title>
<link rel="shortcut icon" href="https://alleny.xyz/favicon.ico?v=1747120786321">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://alleny.xyz/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="è¸©å‘è®°å½•ï¼šç›¸åŒæ•°æ®ï¼Œä¸¤æ¬¡pltç”»å›¾ç»“æœä¸ä¸€è‡´ | AllenY&#39;s blog - Atom Feed" href="https://alleny.xyz/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">


<script async src="https://www.googletagmanager.com/gtag/js?id=G-HPLP8D1S43"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HPLP8D1S43');
</script>


    <meta name="description" content="ä½¿ç”¨å®Œå…¨ç›¸åŒçš„æ•°æ®ï¼Œpltç”»å›¾å´èƒ½å¾—åˆ°ä¸åŒçš„å›¾åƒã€‚

é—®é¢˜
ç¬”è€…ä½¿ç”¨pltç”»æŸ±çŠ¶å›¾ï¼Œä»£ç å¦‚ä¸‹ï¼š
def plot_activation_frequencies():
    if not os.path.exists(&quot;img&q..." />
    <meta name="keywords" content="Technical Sharing" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://alleny.xyz">
  <img class="avatar" src="https://alleny.xyz/images/avatar.png?v=1747120786321" alt="">
  </a>
  <h1 class="site-title">
    AllenY&#39;s blog
  </h1>
  <p class="site-description">
    ğŸ§‘ğŸ»â€ğŸ’»ğŸ®ğŸ¿ğŸ¹ğŸ—»
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          Home
        </a>
      
    
      
        <a href="/archives" class="menu">
          Archive
        </a>
      
    
      
        <a href="/tags" class="menu">
          Tags
        </a>
      
    
      
        <a href="/post/about" class="menu">
          About
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/Yuan-Allen" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
    
      
        <a href="https://weibo.com/u/6478080851" target="_blank">
          <i class="ri-weibo-line"></i>
        </a>
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              è¸©å‘è®°å½•ï¼šç›¸åŒæ•°æ®ï¼Œä¸¤æ¬¡pltç”»å›¾ç»“æœä¸ä¸€è‡´
            </h2>
            <div class="post-info">
              <span>
                2024-08-02
              </span>
              <span>
                3 min read
              </span>
              
                <a href="https://alleny.xyz/tag/WT-UATSMl/" class="post-tag">
                  # Technical Sharing
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://alleny.xyz/post-images/plt-plot-bug.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <p>ä½¿ç”¨å®Œå…¨ç›¸åŒçš„æ•°æ®ï¼Œpltç”»å›¾å´èƒ½å¾—åˆ°ä¸åŒçš„å›¾åƒã€‚</p>
<!-- more -->
<h2 id="é—®é¢˜">é—®é¢˜</h2>
<p>ç¬”è€…ä½¿ç”¨<code>plt</code>ç”»æŸ±çŠ¶å›¾ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-python">def plot_activation_frequencies():
    if not os.path.exists(&quot;img&quot;):
        os.makedirs(&quot;img&quot;)
    for layer_name, activations in layer_activations.items():

        input_data = flatten_activations(activations[&quot;inputs&quot;])
        output_data = flatten_activations(activations[&quot;outputs&quot;])

        input_activation_freq = (input_data &gt; 0).mean(axis=0)
        output_activation_freq = (output_data &gt; 0).mean(axis=0)

        plt.figure(figsize=(12, 6))

        plt.subplot(1, 2, 1)
        plt.bar(
            range(len(input_activation_freq)),
            input_activation_freq,
            color=&quot;blue&quot;,
            alpha=0.7,
        )
        plt.title(f&quot;{layer_name} Input Activation Frequency&quot;)
        plt.xlabel(&quot;Index&quot;)
        plt.ylabel(&quot;Frequency&quot;)

        plt.subplot(1, 2, 2)
        plt.bar(
            range(len(output_activation_freq)),
            output_activation_freq,
            color=&quot;green&quot;,
            alpha=0.7,
        )
        plt.title(f&quot;{layer_name} Output Activation Frequency&quot;)
        plt.xlabel(&quot;Index&quot;)
        plt.ylabel(&quot;Frequency&quot;)

        plt.tight_layout()
        plt.savefig(f&quot;img/{layer_name}_activation_frequency.png&quot;)
        plt.close()
</code></pre>
<p>é€šè¿‡<code>print</code>æ‰“å°ä¸­é—´æ•°æ®ï¼Œå¯å¾—åˆ°<code>input_activation_freq</code>å’Œ<code>output_activation_freq</code>çš„å†…å®¹å®Œå…¨ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸¤æ¬¡<code>plt.bar</code>çš„å‚æ•°é™¤äº†é¢œè‰²éƒ½æ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œç”»å‡ºæ¥çš„ä¸¤ä¸ªå›¾åƒå´é•¿å¾—ä¸ä¸€æ ·ï¼</p>
<h2 id="è§£å†³è¿‡ç¨‹">è§£å†³è¿‡ç¨‹</h2>
<ol>
<li>ç¬”è€…åˆç›´æ¥æŠŠç¬¬äºŒä¸ª<code>plt.bar</code>çš„å‚æ•°ä¹Ÿæ¢æˆ<code>input_activation_freq</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ç›´æ¥ç”¨ç›¸åŒçš„<code>input_activation_freq</code>è¿ç»­ç”»ä¸¤æ¬¡å›¾ï¼Œå¯å¾—åˆ°çš„ä¸¤ä¸ªå›¾ä»ç„¶ä¸ä¸€æ ·ã€‚</li>
<li>ç¬”è€…åˆæ³¨é‡Šæ‰ç¬¬äºŒæ¬¡<code>plt.bar</code>ï¼Œåªç”»ä¸€æ¬¡å›¾ï¼Œç»“æœå¾—åˆ°çš„å›¾ç”šè‡³å’Œä¹‹å‰å¾—åˆ°çš„ä¸¤ç§å›¾éƒ½ä¸ä¸€æ ·ã€‚</li>
<li>ç¬”è€…å°è¯•æŠŠ<code>input_activation_freq</code>æ¢æˆ<code>np.arange(0, 3000, 6)</code>ï¼Œä¸¤è¾¹ç”»çš„å›¾ä¸€æ ·äº†</li>
<li>ç¬”è€…å°è¯•æŠŠ<code>input_activation_freq</code>æ¢æˆ<code>input_activation_freq[:2]</code>ï¼Œä¸¤è¾¹ç”»çš„å›¾ä¸€æ ·ã€‚</li>
<li>ç¬”è€…å°è¯•æŠŠ<code>input_activation_freq</code>æ¢æˆ<code>input_activation_freq[:100]</code>ï¼Œä¸¤è¾¹ç”»çš„å›¾ä¸€æ ·ã€‚</li>
<li>ç¬”è€…å°è¯•æŠŠ<code>input_activation_freq</code>æ¢æˆ<code>input_activation_freq[:1000]</code>ï¼Œä¸¤è¾¹ç”»çš„å›¾åˆä¸ä¸€æ ·äº†ï¼ˆ<strong>é‡è¦</strong>ï¼‰ã€‚</li>
</ol>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸¤æ¬¡ç”»å›¾å¾—åˆ°çš„å›¾æ˜¯å¦ä¸€æ ·ï¼Œç«Ÿç„¶å’Œæ•°æ®é‡æœ‰å…³ç³»ï¼Ÿ</p>
<h2 id="åŸå› ">åŸå› </h2>
<p>åŸå› å…¶å®æ˜¯ç”»çš„å›¾æ¨ªåæ ‡å¤ªé•¿ï¼ˆ3072ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰ä¸‰åƒå¤šæ¡æŸ±å­ï¼Œè€Œå›¾åˆå¤ªå°ï¼ˆ<code>plt.figure(figsize=(12, 6))</code>ï¼‰ï¼Œè€Œä¸€æ¡æŸ±å­çš„å®½åº¦èµ·ç è¦å ä¸€ä¸ªåƒç´ ç‚¹ï¼Œå°±å¯¼è‡´<strong>è¿™ä¹ˆå°çš„å›¾å…¶å®æ— æ³•å®Œå…¨å±•ç¤ºæ‰€æœ‰çš„æŸ±å­</strong>ã€‚è€Œå·¦å³ä¸¤ä¸ª<code>plt.subplot</code>ç”»å›¾æ—¶å¯èƒ½å¯¹æŸ±å­é‡‡çš„æ ·ä¸åŒï¼ˆæ¯•ç«Ÿè¦åœ¨è¿™ä¹ˆå°çš„å›¾å†…æ˜¾ç¤ºè¿™ä¹ˆå¤šæŸ±å­æ˜¯ä¸å¯èƒ½çš„ï¼Œå…¶å®åªèƒ½å±•ç¤ºä¸€éƒ¨åˆ†æŸ±å­ï¼‰ï¼Œå°±å¯¼è‡´ç›¸åŒæ•°æ®å·¦å³ç”»çš„å›¾ä¸ä¸€è‡´ã€‚</p>
<h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2>
<p>å¯ä»¥æ‰©å¤§å›¾çš„å¤§å°ï¼Œå³è°ƒæ•´<code>plt.figure</code>çš„å‚æ•°å¤§å°ã€‚<br>
æ›´å¥½çš„æ–¹å¼æ˜¯æŠŠ<code>png</code>æ¢æˆä½¿ç”¨<code>pdf</code>å­˜å‚¨ï¼Œå³å¯è§£å†³é—®é¢˜ã€‚</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E9%97%AE%E9%A2%98">é—®é¢˜</a></li>
<li><a href="#%E8%A7%A3%E5%86%B3%E8%BF%87%E7%A8%8B">è§£å†³è¿‡ç¨‹</a></li>
<li><a href="#%E5%8E%9F%E5%9B%A0">åŸå› </a></li>
<li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">è§£å†³æ–¹æ¡ˆ</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://alleny.xyz/post/leetcode-hash-table/">
              <h3 class="post-title">
                LeetCodeåˆ·é¢˜è®°å½•ï¼ˆå“ˆå¸Œè¡¨ç¯‡ï¼‰
              </h3>
            </a>
          </div>
        

        
          

          
            <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css">
<script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>

<div id="disqus_thread"></div>

<script>

var options = {
  shortname: 'alleny-blog',
  apikey: '2kPJh2tQ0rWB7n0QOhvb9TLbm946tHMWCixW2qGF9j8tfMBgZoNPfvLpDoxZTZpD',
}
if ('https://disqus.hangyu-yuan.workers.dev/api/') {
  options.api = 'https://disqus.hangyu-yuan.workers.dev/api/'
}
var dsqjs = new DisqusJS(options)

</script>

          
        

        <div class="site-footer">
  Copyright Â© 2023-2025 Allen Yuan. All rights reserved.
  <a class="rss" href="https://alleny.xyz/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
